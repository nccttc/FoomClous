# YT-DLP 涓嬭浇涓撳尯

FoomClous 闆嗘垚浜?[yt-dlp](https://github.com/yt-dlp/yt-dlp)锛屽彲浠ラ€氳繃 Telegram Bot 鍙戦€侀摼鎺ワ紝璁╂湇鍔″櫒鑷姩瑙ｆ瀽骞朵笅杞斤紝鐒跺悗涓婁紶鍒板綋鍓嶉€変腑鐨勫瓨鍌ㄦ簮銆?
---

## 1. 浣跨敤鏂瑰紡锛圱elegram Bot锛?
1. 鍏堜笌 Bot 瀵硅瘽骞跺畬鎴愯韩浠介獙璇侊細
   - `/start`

2. 鍙戦€佷笅杞藉懡浠わ細
   ```
   /ytdlp https://example.com/video
   ```

3. Bot 浼氭彁绀轰换鍔″紑濮嬶紝骞跺彲閫氳繃 `/tasks` 鏌ョ湅闃熷垪杩涘害銆?
---

## 2. 鍓嶇濡備綍鏌ョ湅涓嬭浇缁撴灉

鍓嶇宸︿晶宸ュ叿鏍忔彁渚涚嫭绔嬪垎鍖?**YT-DLP**锛?
- 杩涘叆璇ュ垎鍖哄悗浼氫互鈥滄墎骞冲垪琛ㄢ€濆睍绀轰笅杞界粨鏋?- 涓嶅啀闇€瑕佽繘鍏?`ytdlp` 鏂囦欢澶癸紙鍗充娇鍚庣浠嶄娇鐢?`folder=ytdlp` 杩涜褰掔被锛屽墠绔湪璇ュ垎鍖轰細鐩存帴鎶婂畠浠钩閾哄睍绀猴級

---

## 3. 渚濊禆涓庣幆澧冨彉閲?
### 渚濊禆璇存槑

- 瀹樻柟鍚庣闀滃儚閫氬父宸插唴缃?`yt-dlp` 涓?`ffmpeg`
- 鑻ヨ嚜琛屾瀯寤洪暅鍍忥紝璇风‘淇濊繍琛岀幆澧冧腑鍙墽琛岋細
  - `yt-dlp`
  - `ffmpeg`

### 鍙€夌幆澧冨彉閲忥紙.env锛?
| 鍙橀噺鍚?| 璇存槑 | 榛樿鍊?|
| :--- | :--- | :--- |
| `YTDLP_BIN` | yt-dlp 鍙墽琛屾枃浠惰矾寰?| `yt-dlp` |
| `YTDLP_WORK_DIR` | 涓嬭浇涓存椂鐩綍 | `./data/uploads/ytdlp` |
| `YTDLP_MAX_CONCURRENT` | 骞跺彂涓嬭浇浠诲姟鏁?| `1` |

---

## 4. 甯歌闂

### 4.1 涓嬭浇鍚庡墠绔棤娉曢瑙?娌℃湁缂╃暐鍥撅紵

- 鍥剧墖/瑙嗛缂╃暐鍥句緷璧栧悗绔殑 MIME 绫诲瀷璇嗗埆涓?`ffmpeg/sharp` 澶勭悊
- 濡傛灉閬囧埌鈥滄殏涓嶆敮鎸侀瑙堟绫诲瀷鏂囦欢鈥濓紝浼樺厛妫€鏌ワ細
  - 鍚庣鏄惁宸叉纭瘑鍒?`mime_type` 涓?`video/*` 鎴?`image/*`
  - 鐜鍐呮槸鍚﹁兘姝ｅ父鎵ц `ffmpeg`

---

[杩斿洖鏂囨。涓績](./README.md)
